services:
  - type: web
    name: whatsapp-backend
    env: docker
    plan: free
    branch: main
    buildCommand: ''
    dockerContext: whatsapp-backend
    dockerfilePath: Dockerfile
    healthCheckPath: /status
    # disk removed to allow free-tier deploys. Persistent data will not be retained
    # across restarts on free instances. To persist auth data, consider mounting a
    # paid persistent disk or using an external storage (S3, Cloudinary, DB, etc.).
    envVars:
      - key: WA_DATA_PATH
        value: /data/wwebjs_auth
        scope: private
      - key: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/chromium
        scope: private
    # Persistent disk and health check are defined above using the official
    # render.yaml schema fields: `disk` and `healthCheckPath`.
    # - `disk.mountPath` should match `WA_DATA_PATH` so LocalAuth data is persisted.
    # - If your editor still shows validation errors, ensure it uses the Render
    #   schema from https://render.com/schema/render.yaml.json
