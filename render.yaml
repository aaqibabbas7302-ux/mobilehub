services:
  - type: web
    name: whatsapp-backend
    env: docker
    plan: starter
    repo: .
    branch: main
    buildCommand: ''
    dockerContext: whatsapp-backend
    dockerfilePath: Dockerfile
    envVars:
      - key: WA_DATA_PATH
        value: /data/wwebjs_auth
        scope: private
      - key: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/chromium
        scope: private
    mounts:
      - type: persistent
        name: whatsapp-backend-data
        mountPath: /data
        sizeGB: 10
    healthCheck:
      path: /status
      protocol: http
      intervalSeconds: 10
      timeoutSeconds: 5
      healthyThreshold: 1
      unhealthyThreshold: 3
